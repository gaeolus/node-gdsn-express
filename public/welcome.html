<h3>Welcome</h3>

<h2>API Documentation</h2>
<div>
  Most API calls can return a variety of response formats and content types. Return type is based on URL, request parameters, or the "Accept" header, depending on what is supported by the specific endpoint.
</div>
<div id="accordion_docs">
  <div>Messages</div>
  <div>
    <div>A message is an XML document that provides data on catalog items or trading parties.</div>
    <table>
      <tr>
        <th>Endpoint</th>
        <th>Method</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>/api/1.0/msg</td>
        <td>GET</td>
        <td>Returns an array of message summary records (without full message content)</td>
      </tr>
      <tr>
        <td>/api/1.0/msg/:id</td>
        <td>GET</td>
        <td>Returns the full message content for the specified ID</td>
      </tr>
      <tr>
        <td>/api/1.0/msg</td>
        <td>POST</td>
        <td>Returns operation result</td>
      </tr>
    </table>
  </div>
  <div>Catalog Items</div>
  <div>
    <div>A catalog item is the main type of data provided by CS</div>
    <table>
      <tr>
        <th>Endpoint</th>
        <th>Method</th>
        <th>Description</th>
      </tr>
      <tr>
        <td>/api/1.0/items</td>
        <td>GET</td>
        <td>Returns an array of catalog item summary records (without full item content)</td>
      </tr>
      <tr>
        <td>
          <div>/api/1.0/items/:gtin</div>
          <div>/api/1.0/items/:gtin/:ds</div>
          <div>/api/1.0/items/:gtin/:ds/:tm</div>
          <div>/api/1.0/items/:gtin/:ds/:tm/:dr</div>
        </td>
        <td>GET</td>
        <td>Returns the most recent full catalog item details for the specified GTIN, DS, TM and DR. Either JSON or XML can be returned</td>
      </tr>
      <tr>
        <td>/api/1.0/items</td>
        <td>POST</td>
        <td>Returns operation result</td>
      </tr>
    </table>
  </div>
  <div>Trading Parties</div>
  <div>
    <table>
      <tr>
        <th></th>
        <th></th>
        <th></th>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </div>
  <div>Publications</div>
  <div>
    <table>
      <tr>
        <th>Content Type</th>
        <th></th>
        <th></th>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </div>
  <div>Subscriptions</div>
  <div>
    <table>
      <tr>
        <th>Content Type</th>
        <th></th>
        <th></th>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>
  </div>
</div>

<script>
  (function () {

    $('#accordion_docs').accordion({
      active: false
      , heightStyle: 'content'
      , collapsible: true
    })

   })()
</script>

<h2>Introduction to ITN Catalog Services and GDSN</h2>

<p>GDSN allows Trading Parties to exchange Catalog Item information based on a pub/sub distribution model. It is a set of standards and services provided by the GS1 organization () and private Data Pools.</p>

<p>GDSN includes the following components:</p>
<li>a set of standards, including XML Schema (XSD) definitions that describe items and workflow</li>
<li>a Global Registry (GR) that registers items and tracks subscription and party information</li>
<li>a collection of Data Pools (DPs), service providers that interoperate on behalf of parties</li>
<li>many trading parties such as manufacturers, distributors, and retailers. 

<p>Within the GDSN, each catalog item is identified by the unique combination of GTIN, provider GLN, and TM (target market country and subdivision). These values are available within the item data, making items self-contained. In practice, it is also necessary to track the item recipient GLN (which is not part of the item data). Usually the recipient is the GLN of the subscriber receiving published data. For the original catalog item (as registered by the provider), the recipient will always be the GLN of the provider's home data pool.

<p>The recipient GLN is needed because items may be customized during the publication/notification process (e.g. augmenting or stripping data according to publication and subscription options). This is somewhat uncommon, but it does happen and we need to account for it. The more typical approach is for subscribers to accept the unmodified item data (as registered by the provider) and then transform or process the data as needed.</p>

<p>If the subscriber does not like something about the data, there is a review and approval process included as part of GDSN that can be used to communicate back to the publisher. The publisher can decide to update an item and do so as often as they please. Each item update will trigger outbound messages to all current subscribers.</p>

The compound natural key (gtin-provider-tm-recipient) for items allows for complex use cases, such as:

1.	Multiple TM: providers can create items specific to different countries or states. Each item may have completely different data as needed, so it is more than just “versioning”.

2.	Multiple provider GLNs for the same GTIN: a distributor may “republish” an item using their own GLN, allowing customization of the item as needed. Or the same GTIN could just randomly happen to get used by various providers.

3.	Multiple recipients: each recipient may have slightly different requirements regarding item definition. For example, some recipients don’t want nutritional data or other “extended” data.

<h2>GDSN External Code Lists</h2>

<h4>ISO target market:</h4>
<ul>
  <li>Numeric country codes: http://en.wikipedia.org/wiki/ISO_3166-1_numeric</li>
  <li>Alpha subdivision codes: http://en.wikipedia.org/wiki/ISO_3166-2</li>
  <li>United States subdivision codes for states: http://en.wikipedia.org/wiki/ISO_3166-2:US</li>
</ul>

<h2>GDSN Catalog Item Integration Using CIN Format</h2>

<h4>GDSN XML: Catalog Item Notification</h4>

It is suggested that we use the GS1 standard Catalog Item Notification (CIN) message format for our GDSN catalog item integration efforts. This format can accommodate a large variety of industry standard and custom data attributes useful for describing hierarchies of complex catalog items.
Identifying Catalog Items in GDSN
Every registered GDSN catalog item will have the following 5 unique identifying data points:

<ol>
  <li>GTIN
  <li>Provider GLN (publisher)
  <li>Data Recipient GLN (subscriber or home data pool)
  <li>Target Market Country (ISO numeric country code)
  <li>Target Market Subdivision (e.g. nullable or a state string like ‘US-CA’)
</ol>
 
All of these values must be specified when identifying a specific item within the GDSN network, except for 5. which is optional and rarely used
Required CIN Message Structure
Appendix 1 shows a minimal CIN message containing a hierarchy of two trade items. Each item is valid but very simple so that we can focus on the message structure and required attributes. We will review more complicated items attributes later (e.g. nutritional data).
 
For purposes of illustration, the sample contains the following tokens which would be replaced as follows in actual usage:
 
1.     Message_ID: this should be a unique string of 50 characters or less. It is used as a prefix for various identifiers scattered throughout the message.
a.     Only used for routing, logging, and diagnostics.
b.    A convention used by ITN is to embed the top-level item GTIN for easy lookup.
c.     Consistent use of a short prefix allows convenient message grouping. For example, OMS uses the prefix "API_CIN_".
 
2.     Creation_Date_Time: data and time of message creation
a.     ISO formatted date-time string (e.g. "2014-01-21T16:20:00.000-08:00")
b.    Can be used to version trade item data contained in message
 
3.     Sender_ID: the GLN of either the source trading party or data pool.
a.     If the message will be sent over AS2, then this GLN must be suitably configured.
b.    If a party GLN is used, then it must be registered with the ITN data pool.
c.     ITN has a party GLN that can be used as a default if AS2 is not required: 1100001011292.
 
4.     Receiver_GLN: The GLN of the ITN data pool.
a.     Required for proper routing. Can be defaulted to 1100001011285.
 
5.     Data_Recipient_GLN: the GLN of the recipient trading party or data pool.
a.     If set to the ITN data pool, the item will be registered with the Global Registry (GR) and become eligible for GDSN publication.
b.    If set to the GLN of the data provider (see 5. above), then the data will be routed to OMS the same as inbound GDSN data.

<h2>Trade Item Identification and Details</h2>
<h4>In addition to the CIN message-level data points discussed above, each trade item within the message also contains a number of identifying elements:</h4>
 
1.     Data_Provider_GLN: the GLN of the party that owns the catalog item data.
a.     Required
b.    The ITN trading party proxy GLN may be used if needed
c.     Additional party identification (non-GLN) is supported (e.g. DUNS)
 
2.     Brand_Owner_GLN:
a.     Optional
b.    The ITN trading party proxy GLN may be used if needed
c.     Additional party identification (non-GLN) is supported (e.g. DUNS)
 
3.     Manufacturer_GLN:
a.     Optional
b.    The ITN trading party proxy GLN may be used if needed
c.     Additional party identification (non-GLN) is supported (e.g. DUNS)
 
4.     Source_Data_Pool:
a.     Optional
b.    The GLN of the source data pool
 
Please see example usage below.

<h2>Support for Custom Item Data</h2>
<h4>There are a couple mechanisms available for including custom data not currently accounted for in the XML schema:</h4>
<ol>
  <li>Attribute Value Pair Extension: this is a standard (GS1) extension that can be used to include arbitrary key-value pairs per item.
  <li>ITN Extension: this is a custom extension compatible with GS1 schema that can be used to include structured data (beyond just key-value pairs) per item.
</ol>

<h2>Routing and Workflow</h2>
<h4>CIN messages handled by the ITN Data Pool are subject to the following workflow routing, based on the values of certain data points:</h4>
<table>
  <tr>
    <th>Routing/Workflow</th>
    <th>Sender</th>
    <th>Receiver</th>
    <th>Provider</th>
    <th>Recipient</th>
  </tr><tr>
    <td>Registration or Update</td>
    <td>ITN Trading Party</td>
    <td>ITN Data Pool</td>
    <td>ITN Trading Party</td>
    <td>ITN Data Pool</td>
  </tr><tr>
    <td>Non-registration Persistence</td>
    <td>ITN Trading Party</td>
    <td>ITN Data Pool</td>
    <td>ITN Trading Party</td>
    <td>ITN Trading Party</td>
  </tr><tr>
    <td>Inbound from other DP</td>
    <td>Other DP</td>
    <td>ITN Data Pool</td>
    <td>Non-ITN Trading Party</td>
    <td>ITN Trading Party</td>
  </tr><tr>
    <td>Subscription Delivery</td>
    <td>ITN Data Pool</td>
    <td>ITN Trading Party</td>
    <td>Any Trading Party</td>
    <td>ITN Trading Party</td>
  </tr>
</table>
 
<h2>Sample XML with schema locations and named replacement tokens (highlighted):</h2>
<textarea rows="20" cols="120">
  <?xml version="1.0" encoding="UTF-8"?>
  <sh:StandardBusinessDocument xmlns:sh="http://www.unece.org/cefact/namespaces/StandardBusinessDocumentHeader" xmlns:eanucc="urn:ean.ucc:2" xmlns:food="urn:ean.ucc:align:food_beverage_tobacco:2" xmlns:gdsn="urn:ean.ucc:gdsn:2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.unece.org/cefact/namespaces/StandardBusinessDocumentHeader http://www.gdsregistry.org/2.8/schemas/sbdh/StandardBusinessDocumentHeader.xsd urn:ean.ucc:2 http://www.gdsregistry.org/2.8/schemas/CatalogueItemNotificationProxy.xsd urn:ean.ucc:2 http://www.gdsregistry.org/2.8/schemas/AttributeValuePairExtensionProxy.xsd urn:ean.ucc:2 http://www.gdsregistry.org/2.8/schemas/FoodAndBeverageTradeItemExtensionProxy.xsd ">
      <sh:StandardBusinessDocumentHeader>
          <sh:HeaderVersion>1.0</sh:HeaderVersion>
          <sh:Sender>
              <sh:Identifier Authority="EAN.UCC">${Sender_GLN}</sh:Identifier>
          </sh:Sender>
          <sh:Receiver>
              <sh:Identifier Authority="EAN.UCC">${Receiver_GLN}</sh:Identifier>
          </sh:Receiver>
          <sh:DocumentIdentification>
              <sh:Standard>EAN.UCC</sh:Standard>
              <sh:TypeVersion>2.8</sh:TypeVersion>
              <sh:InstanceIdentifier>${Message_ID}</sh:InstanceIdentifier>
              <sh:Type>catalogueItemNotification</sh:Type>
              <sh:CreationDateAndTime>${Creation_Date_Time}</sh:CreationDateAndTime>
          </sh:DocumentIdentification>
      </sh:StandardBusinessDocumentHeader>
      <eanucc:message>
          <entityIdentification>
              <uniqueCreatorIdentification>${Message_ID}</uniqueCreatorIdentification>
              <contentOwner>
                  <gln>${Sender_GLN}</gln>
              </contentOwner>
          </entityIdentification>
          <eanucc:transaction>
              <entityIdentification>
                  <uniqueCreatorIdentification>${Message_ID}_TXN-1</uniqueCreatorIdentification>
                  <contentOwner>
                      <gln>${Sender_GLN}</gln>
                  </contentOwner>
              </entityIdentification>
              <command>
                  <eanucc:documentCommand>
                      <documentCommandHeader type="ADD">
                          <entityIdentification>
                              <uniqueCreatorIdentification>${Message_ID}_TXN-1_CMD-1</uniqueCreatorIdentification>
                              <contentOwner>
                                  <gln>${Sender_GLN}</gln>
                              </contentOwner>
                          </entityIdentification>
                      </documentCommandHeader>
                      <documentCommandOperand>
                          <gdsn:catalogueItemNotification creationDateTime="${Creation_Date_Time}" documentStatus="ORIGINAL" isReload="false">
                              <catalogueItem>
                                  <catalogueItemState state="IN_PROGRESS"/>
                                  <tradeItem>
                                      <tradeItemUnitDescriptor>CASE</tradeItemUnitDescriptor>
                                      <tradeItemIdentification>
                                          <gtin>10036016500279</gtin>
                                          <additionalTradeItemIdentification>
                                              <additionalTradeItemIdentificationValue>ITN_12345</additionalTradeItemIdentificationValue>
                                              <additionalTradeItemIdentificationType>SUPPLIER_ASSIGNED</additionalTradeItemIdentificationType>
                                          </additionalTradeItemIdentification>
                                      </tradeItemIdentification>
                                      <nextLowerLevelTradeItemInformation>
                                          <quantityOfChildren>1</quantityOfChildren>
  <totalQuantityOfNextLowerLevelTradeItem>42</totalQuantityOfNextLowerLevelTradeItem>
                                          <childTradeItem>
  <quantityofNextLowerLevelTradeItem>42</quantityofNextLowerLevelTradeItem>
                                              <tradeItemIdentification>
                                                  <gtin>10024951191010</gtin>
                                              </tradeItemIdentification>
                                          </childTradeItem>
                                      </nextLowerLevelTradeItemInformation>                                    <tradeItemInformation>
                                          <informationProviderOfTradeItem>
                                              <informationProvider>
                                                  <gln>${Data_Provider_GLN}</gln>
                                              </informationProvider>
                                              <nameOfInformationProvider>some datasource</nameOfInformationProvider>
                                          </informationProviderOfTradeItem>
                                          <targetMarketInformation>
                                              <targetMarketCountryCode>
                                                  <countryISOCode>840</countryISOCode>
                                              </targetMarketCountryCode>
                                          </targetMarketInformation>
                                          <classificationCategoryCode>
                                              <classificationCategoryCode>10000277</classificationCategoryCode>
                                          </classificationCategoryCode>
                                          <tradeItemDescriptionInformation>
                                              <brandName>Pennant</brandName>
                                              <functionalName>
                                                  <description>
                                                      <language>
                                                          <languageISOCode>en</languageISOCode>
                                                      </language>
                                                      <shortText>en functional name</shortText>
                                                  </description>
                                                  <description>
                                                      <language>
                                                          <languageISOCode>es</languageISOCode>
                                                      </language>
                                                      <shortText>es functional name</shortText>
                                                  </description>
                                              </functionalName>
                                          </tradeItemDescriptionInformation>
                                          <tradingPartnerNeutralTradeItemInformation>
                                              <tradeItemUnitIndicator>
                                                  <isTradeItemABaseUnit>false</isTradeItemABaseUnit>
                                                  <isTradeItemAConsumerUnit>true</isTradeItemAConsumerUnit>
                                                  <isTradeItemADespatchUnit>true</isTradeItemADespatchUnit>
                                                  <isTradeItemAnInvoiceUnit>true</isTradeItemAnInvoiceUnit>
                                                  <isTradeItemAnOrderableUnit>false</isTradeItemAnOrderableUnit>
                                                  <isTradeItemAVariableUnit>true</isTradeItemAVariableUnit>
                                              </tradeItemUnitIndicator>
                                              <packagingMarking>
                                                  <isPackagingMarkedReturnable>false</isPackagingMarkedReturnable>
                                              </packagingMarking>
                                              <tradeItemMeasurements hasDisplayReadyPackaging="NOT_APPLICABLE">
                                                  <depth>
                                                      <measurementValue unitOfMeasure="CM">
                                                          <value>25.99</value>
                                                      </measurementValue>
                                                  </depth>
                                                  <height>
                                                      <measurementValue unitOfMeasure="CM">
                                                          <value>12.6</value>
                                                      </measurementValue>
                                                  </height>
                                                  <isNetContentDeclarationIndicated>false</isNetContentDeclarationIndicated>
                                                  <width>
                                                      <measurementValue unitOfMeasure="CM">
                                                          <value>50.000001</value>
                                                      </measurementValue>
                                                  </width>
                                              </tradeItemMeasurements>
                                          </tradingPartnerNeutralTradeItemInformation>
                                      </tradeItemInformation>
                                  </tradeItem>
                                  <dataRecipient>${Data_Recipient_GLN}</dataRecipient>
                                  <sourceDataPool>${Source_Data_Pool}</sourceDataPool>
                                  <catalogueItemChildItemLink quantity="42">
                                      <catalogueItem>
                                          <catalogueItemState state="IN_PROGRESS"/>
                                          <tradeItem>
                                              <tradeItemUnitDescriptor>BASE_UNIT_OR_EACH</tradeItemUnitDescriptor>
                                              <tradeItemIdentification>
                                                  <gtin>10024951191010</gtin>
                                              </tradeItemIdentification>
                                              <tradeItemInformation>
                                                  <informationProviderOfTradeItem>
                                                      <informationProvider>
                                                          <gln>${Data_Provider_GLN}</gln>
                                                      </informationProvider>
                                                      <nameOfInformationProvider>some datasource</nameOfInformationProvider>
                                                  </informationProviderOfTradeItem>
                                                  <targetMarketInformation>
                                                      <targetMarketCountryCode>
                                                          <countryISOCode>840</countryISOCode>
                                                      </targetMarketCountryCode>
                                                  </targetMarketInformation>
                                                  <classificationCategoryCode>
                                                      <classificationCategoryCode>10000278</classificationCategoryCode>
                                                  </classificationCategoryCode>
                                                  <tradeItemDescriptionInformation>
                                                      <brandName>Best-Fresh</brandName>
                                                      <functionalName>
                                                          <description>
                                                              <language>
                                                                  <languageISOCode>en</languageISOCode>
                                                              </language>
                                                              <shortText>functional each: Plain Yogurt</shortText>
                                                          </description>
                                                      </functionalName>
                                                  </tradeItemDescriptionInformation>
                                                  <tradingPartnerNeutralTradeItemInformation>
                                                      <tradeItemUnitIndicator>
                                                          <isTradeItemABaseUnit>true</isTradeItemABaseUnit>
                                                          <isTradeItemAConsumerUnit>true</isTradeItemAConsumerUnit>
                                                          <isTradeItemADespatchUnit>true</isTradeItemADespatchUnit>
                                                          <isTradeItemAnInvoiceUnit>true</isTradeItemAnInvoiceUnit>
                                                          <isTradeItemAnOrderableUnit>false</isTradeItemAnOrderableUnit>
                                                          <isTradeItemAVariableUnit>false</isTradeItemAVariableUnit>
                                                      </tradeItemUnitIndicator>
                                                      <packagingMarking>
                                                          <isPackagingMarkedReturnable>false</isPackagingMarkedReturnable>
                                                      </packagingMarking>
                                                      <tradeItemMeasurements hasDisplayReadyPackaging="NOT_APPLICABLE">
                                                          <depth>
                                                              <measurementValue unitOfMeasure="CM">
                                                                  <value>25.99999</value>
                                                              </measurementValue>
                                                          </depth>
                                                          <height>
                                                              <measurementValue unitOfMeasure="CM">
                                                                  <value>12.6</value>
                                                              </measurementValue>
                                                          </height>
                                                          <width>
                                                              <measurementValue unitOfMeasure="CM">
                                                                  <value>50.000001</value>
                                                              </measurementValue>
                                                          </width>
                                                      </tradeItemMeasurements>
                                                  </tradingPartnerNeutralTradeItemInformation>
                                              </tradeItemInformation>
                                          </tradeItem>
                                          <dataRecipient>${Data_Recipient_GLN}</dataRecipient>
                                          <sourceDataPool>${Source_Data_Pool}</sourceDataPool>
                                      </catalogueItem>
                                  </catalogueItemChildItemLink>
                              </catalogueItem>
                              <catalogueItemNotificationIdentification>
                                  <uniqueCreatorIdentification>${Message_ID}_TXN-1_CMD-1_DOC-1</uniqueCreatorIdentification>
                                  <contentOwner>
                                      <gln>${Sender_GLN}</gln>
                                  </contentOwner>
                              </catalogueItemNotificationIdentification>
                          </gdsn:catalogueItemNotification>
                      </documentCommandOperand>
                  </eanucc:documentCommand>
              </command>
          </eanucc:transaction>
      </eanucc:message>
  </sh:StandardBusinessDocument>
</textarea>
 
<h2>Sample XML for additional party identification elements:</h2>
<textarea rows="20" cols="120">
  <informationProviderOfTradeItem>
      <informationProvider>
          <gln>1100001011292</gln>
          <additionalPartyIdentification>
              <additionalPartyIdentificationValue>123456789</additionalPartyIdentificationValue>
              <additionalPartyIdentificationType>DUNS</additionalPartyIdentificationType>
          </additionalPartyIdentification>
      </informationProvider>
      <nameOfInformationProvider>some datasource</nameOfInformationProvider>
  </informationProviderOfTradeItem>
   
  <brandOwnerOfTradeItem>
      <brandOwner>
          <gln>1100001011292</gln>
          <additionalPartyIdentification>
              <additionalPartyIdentificationValue>123456789</additionalPartyIdentificationValue>
              <additionalPartyIdentificationType>DUNS</additionalPartyIdentificationType>
          </additionalPartyIdentification>
      </brandOwner>
      <nameOfBrandOwner>Brand X</nameOfBrandOwner>
  </brandOwnerOfTradeItem>
   
  <manufacturerOfTradeItem>
      <manufacturer>
          <gln>1100001011292</gln>
          <additionalPartyIdentification>
              <additionalPartyIdentificationValue>123456789</additionalPartyIdentificationValue>
              <additionalPartyIdentificationType>DUNS</additionalPartyIdentificationType>
          </additionalPartyIdentification>
      </manufacturer>
      <nameOfManufacturer>Manufacturer ABC</nameOfManufacturer>
  </manufacturerOfTradeItem>
</textarea>
 

